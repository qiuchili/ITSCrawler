<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=Edge" http-equiv="X-UA-Compatible"/>
<meta content="JIRA" data-name="jira" data-version="7.6.3" name="application-name"/><meta content="false" name="ajs-viewissue-use-history-api"/>
<meta content="https://issues.apache.org/jira" name="ajs-jira-base-url"/>
<meta content="true" name="ajs-serverRenderedViewIssue"/>
<meta content="false" name="ajs-dev-mode"/>
<meta content="/jira" name="ajs-context-path"/>
<meta content="7.6.3" name="ajs-version-number"/>
<meta content="76005" name="ajs-build-number"/>
<meta content="false" name="ajs-is-beta"/>
<meta content="false" name="ajs-is-rc"/>
<meta content="false" name="ajs-is-snapshot"/>
<meta content="false" name="ajs-is-milestone"/>
<meta content="" name="ajs-remote-user"/>
<meta content="" name="ajs-remote-user-fullname"/>
<meta content="en_UK" name="ajs-user-locale"/>
<meta content="," name="ajs-user-locale-group-separator"/>
<meta content="ASF JIRA" name="ajs-app-title"/>
<meta content="true" name="ajs-keyboard-shortcuts-enabled"/>
<meta content="Alt" name="ajs-keyboard-accesskey-modifier"/>
<meta content='["com.atlassian.jira.agile.darkfeature.editable.detailsview","nps.survey.inline.dialog","com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled","jira.plugin.devstatus.phasetwo","jira.frother.reporter.field","atlassian.rest.xsrf.legacy.enabled","jira.issue.status.lozenge","com.atlassian.jira.config.BIG_PIPE","com.atlassian.jira.projects.issuenavigator","com.atlassian.jira.config.PDL","jira.plugin.devstatus.phasetwo.enabled","atlassian.aui.raphael.disabled","app-switcher.new","frother.assignee.field","com.atlassian.jira.projects.ProjectCentricNavigation.Switch","sd.internal.base.off.thread.on.completion.events.enabled","jira.onboarding.cyoa","com.atlassian.jira.agile.darkfeature.kanplan.enabled","sd.slavalue.record.updated.date.enabled","com.atlassian.jira.config.ProjectConfig.MENU","com.atlassian.jira.projects.sidebar.DEFER_RESOURCES","com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled","com.atlassian.jira.agile.darkfeature.sprint.goal.enabled","jira.zdu.admin-updates-ui","jira.zdu.jmx-monitoring","sd.sla.improved.rendering.enabled","sd.canned.responses.enabled","sd.new.settings.sidebar.location.disabled","jira.zdu.cluster-upgrade-state","com.atlassian.jira.agile.darkfeature.splitissue","com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED","com.atlassian.feedback.feedback-button-move-to-header-enable","jira.export.csv.enabled"]' name="ajs-enabled-dark-features"/>
<meta content="false" name="ajs-in-admin-mode"/>
<meta content="false" name="ajs-is-sysadmin"/>
<meta content="false" name="ajs-is-admin"/>
<meta content="true" name="ajs-outgoing-mail-enabled"/>
<meta content="true" name="ajs-date-relativize"/>
<meta content="HH:mm" name="ajs-date-time"/>
<meta content="EEEE HH:mm" name="ajs-date-day"/>
<meta content="dd/MMM/yy" name="ajs-date-dmy"/>
<meta content="dd/MMM/yy HH:mm" name="ajs-date-complete"/>
<script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script>
<meta content="A5KQ-2QAV-T4JA-FDED|6bb40024b79b956ca04682b6d4160feeabadd9a6|lout" id="atlassian-token" name="atlassian-token"/>
<link href="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico" rel="shortcut icon"/>
<!--[if IE]><![endif]-->
<script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script>
<script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"jira.instrumentation.laas\":false,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"com.atlassian.jira.issuetable.draggable\":true,\"jira.create.linked.issue\":true,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"jira.jql.suggestrecentfields\":false,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"jira.jql.smartautoselectfirst\":false,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.priorities.per.project\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"jira.renderer.consider.variable.format\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/vnd.wap.wbmp,image/png,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"56689ecb2f450f\"";
WRM._unparsedData["project-id"]="12310110";
WRM._unparsedData["project-key"]="\"LUCENE\"";
WRM._unparsedData["project-name"]="\"Lucene - Core\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="12310110";
WRM._unparsedData["projectKey"]="\"LUCENE\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script>
<link data-wrm-batch-type="context" data-wrm-key="_super" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" media="all" rel="stylesheet" type="text/css"/>
<link data-wrm-batch-type="context" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" href="/jira/s/74ac580603ca910fff0cfdf319e54add-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true" media="all" rel="stylesheet" type="text/css"/>
<link data-wrm-batch-type="resource" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" media="all" rel="stylesheet" type="text/css"/>
<script data-initially-rendered="" data-wrm-batch-type="context" data-wrm-key="_super" src="/jira/s/7afbd83e43cceb35c841777a86763002-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" type="text/javascript"></script>
<script data-initially-rendered="" data-wrm-batch-type="context" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" src="/jira/s/0dce96e0f0dedc17f71c708ffd08e08d-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true" type="text/javascript"></script>
<script data-initially-rendered="" data-wrm-batch-type="context" data-wrm-key="atl.global,-_super" src="/jira/s/39cd256323d294b2416bc51f69413b09-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" type="text/javascript"></script>
<script data-initially-rendered="" data-wrm-batch-type="resource" data-wrm-key="jira.webresources:calendar-en" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" type="text/javascript"></script>
<script data-initially-rendered="" data-wrm-batch-type="resource" data-wrm-key="jira.webresources:calendar-localisation-moment" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" type="text/javascript"></script>
<script data-initially-rendered="" data-wrm-batch-type="resource" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" type="text/javascript"></script>
<link data-wrm-batch-type="context" data-wrm-key="jira.global.look-and-feel,-_super" href="/jira/s/95a4826c265852f4904f1e0e7300df68-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" media="all" rel="stylesheet" type="text/css"/>
<script src="/jira/rest/api/1.0/shortcuts/76005/66ea8940f2f01b53dfc0cfb25d905dbc/shortcuts.js?context=issuenavigation&amp;context=issueaction" type="text/javascript"></script>
<script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script>
<link data-wrm-batch-type="context" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true" media="all" rel="stylesheet" type="text/css"/>
<script data-initially-rendered="" data-wrm-batch-type="context" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" src="/jira/s/6579b6b8ba67abaa496e39b9242a18a4-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true" type="text/javascript"></script>
<meta charset="utf-8"/><meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="false" name="ajs-can-search-users"/>
<meta content="false" name="ajs-can-edit-watchers"/>
<meta content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453" name="ajs-default-avatar-url"/>
<meta content="software" name="ajs-issue-project-type"/>
<meta content="LUCENE-8610" name="ajs-issue-key"/>
<meta content="false" name="ajs-server-view-issue-is-editable"/>
<title>[LUCENE-8610] NPE in TermsHashPerField.add() for TokenStreams with lazily instantiated token Attributes - ASF JIRA</title>
<link href="/jira/osd.jsp" rel="search" title="[LUCENE-8610] NPE in TermsHashPerField.add() for TokenStreams with lazily instantiated token Attributes - ASF JIRA" type="application/opensearchdescription+xml"/>
</head>
<body class="aui-layout aui-theme-default " data-version="7.6.3" id="jira">
<div id="page">
<header id="header" role="banner">
<script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script>
<nav class="aui-header aui-dropdown2-trigger-group" role="navigation"><div class="aui-header-inner"><div class="aui-header-before"><a aria-controls="app-switcher" aria-haspopup="true" class=" aui-dropdown2-trigger app-switcher-trigger" data-aui-trigger="" href="#app-switcher" role="button" tabindex="0"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a><div aria-hidden="true" class="aui-dropdown2 aui-style-default" data-environment='{"isUserAdmin":false,"isAppSuggestionAvailable":false,"isSiteAdminUser":false}' data-is-switcher="true" id="app-switcher" role="menu"><div role="application"><div class="app-switcher-loading">Loading…</div></div></div></div><div class="aui-header-primary"><h1 class="aui-header-logo aui-header-logo-custom" id="logo"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img alt="ASF JIRA" src="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png"/></a></h1><ul class="aui-nav"><li><a accesskey="d" aria-controls="home_link-content" aria-haspopup="true" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" href="/jira/secure/Dashboard.jspa" id="home_link" title="View and manage your dashboards">Dashboards</a><div class="aui-dropdown2 aui-style-default" data-aui-dropdown2-ajax-key="home_link" id="home_link-content"></div></li><li><a accesskey="p" aria-controls="browse_link-content" aria-haspopup="true" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" href="/jira/browse/LUCENE" id="browse_link" title="View recent projects and browse a list of projects">Projects</a><div class="aui-dropdown2 aui-style-default" data-aui-dropdown2-ajax-key="browse_link" id="browse_link-content"></div></li><li><a accesskey="i" aria-controls="find_link-content" aria-haspopup="true" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" href="/jira/issues/" id="find_link" title="Search for issues and view recent issues">Issues</a><div class="aui-dropdown2 aui-style-default" data-aui-dropdown2-ajax-key="find_link" id="find_link-content"></div></li>
</ul></div><div class="aui-header-secondary"><ul class="aui-nav"><li id="quicksearch-menu">
<form action="/jira/secure/QuickSearch.jspa" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt" id="quicksearch" method="get">
<input accesskey="q" class="search" id="quickSearchInput" name="searchString" placeholder="Search" title="Search" type="text"/>
<input class="hidden" type="submit" value="Search"/>
</form>
</li>
<li><a aria-haspopup="true" class="jira-feedback-plugin" href="#" id="jira-header-feedback-link" role="button"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li>
<li id="system-help-menu">
<a aria-haspopup="true" aria-owns="system-help-menu-content" class="aui-nav-link aui-dropdown2-trigger" href="https://docs.atlassian.com/jira/jcore-docs-076/" id="help_menu" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a>
<div class="aui-dropdown2 aui-style-default" id="system-help-menu-content">
<div class="aui-dropdown2-section">
<ul class="aui-list-truncate" id="jira-help">
<li>
<a class="aui-nav-link " href="https://docs.atlassian.com/jira/jcore-docs-076/" id="view_core_help" target="_blank" title="Go to the online documentation for JIRA Core">JIRA Core help</a>
</li>
<li>
<a class="aui-nav-link " href="/jira/secure/ViewKeyboardShortcuts!default.jspa" id="keyshortscuthelp" target="_blank" title="Get more information about JIRA's Keyboard Shortcuts">Keyboard Shortcuts</a>
</li>
<li>
<a class="aui-nav-link " href="/jira/secure/AboutPage.jspa" id="view_about" title="Get more information about JIRA">About JIRA</a>
</li>
<li>
<a class="aui-nav-link " href="/jira/secure/JiraCreditsPage!default.jspa" id="view_credits" target="_blank" title="See who did what">JIRA Credits</a>
</li>
</ul>
</div>
</div>
</li>
<li id="user-options">
<a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FLUCENE-8610">Log In</a>
<div class="aui-dropdown2 aui-style-default" id="user-options-content">
<div class="aui-dropdown2-section">
</div>
</div>
</li>
</ul></div></div><!-- .aui-header-inner--></nav><!-- .aui-header -->
</header>
<section id="content" role="main">
<big-pipe data-id="sidebar-id" unresolved=""></big-pipe><div class="aui-sidebar sidebar-placeholder"><div class="aui-sidebar-wrapper"><div class="aui-sidebar-body"></div><div class="aui-sidebar-footer"><a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a></div></div></div><script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script><div class="aui-page-panel"><div class="aui-page-panel-inner"><div class="issue-navigator"><div class="content"><div class="issue-view"><div class="navigation-tools"><div class="pager-container"></div></div><div class="issue-container"><div class="issue-edit-form" id="issue-content"><header class="issue-header js-stalker" id="stalker"><div class="issue-header-content"><header class="aui-page-header"><div class="aui-page-header-inner"><div class="aui-page-header-image"><span class="aui-avatar aui-avatar-large aui-avatar-project" id="12310110"><span class="aui-avatar-inner"><img alt="Uploaded image for project: 'Lucene - Core'" id="project-avatar" src="https://issues.apache.org/jira/secure/projectavatar?pid=12310110&amp;avatarId=10061"/></span></span></div><!-- .aui-page-header-image --><div class="aui-page-header-main"><ol class="aui-nav aui-nav-breadcrumbs"><li><a href="/jira/browse/LUCENE" id="project-name-val">Lucene - Core</a></li><li><a class="issue-link" data-issue-key="LUCENE-8610" href="/jira/browse/LUCENE-8610" id="key-val" rel="13204536">LUCENE-8610</a></li></ol><h1 id="summary-val">NPE in TermsHashPerField.add() for TokenStreams with lazily instantiated token Attributes</h1></div><!-- .aui-page-header-main --><div class="aui-page-header-actions"><div id="issue-header-pager"></div></div><!-- .aui-page-header-actions --></div><!-- .aui-page-header-inner --></header><!-- .aui-page-header --><div class="command-bar"><div class="ops-cont"><div class="ops-menus aui-toolbar"><div class="toolbar-split toolbar-split-left"><ul class="toolbar-group pluggable-ops" id="opsbar-ops-login-lnk_container"><li class="toolbar-item"><a class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FLUCENE-8610" id="ops-login-lnk" title="Log In"><span class="trigger-label">Log In</span></a></li></ul><ul class="toolbar-group pluggable-ops" id="opsbar-opsbar-operations"></ul><ul class="toolbar-group pluggable-ops" id="opsbar-opsbar-transitions"></ul><ul class="toolbar-group pluggable-ops" id="opsbar-opsbar-admin"></ul></div><div class="toolbar-split toolbar-split-right"><ul class="toolbar-group pluggable-ops" id="opsbar-jira.issue.tools"><li class="toolbar-item"><div><a aria-haspopup="true" aria-owns="viewissue-export_drop" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger" href="#" id="viewissue-export" title="Export this issue in another format"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a><div class="aui-style-default aui-dropdown2" id="viewissue-export_drop"><ul><li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/LUCENE-8610/LUCENE-8610.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li><li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/LUCENE-8610/LUCENE-8610.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li><li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/LUCENE-8610/LUCENE-8610.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li><li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/LUCENE-8610/LUCENE-8610.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li></ul></div></div></li></ul></div></div></div></div></div></header><div class="issue-body-content"><div class="aui-group issue-body"><div class="aui-item issue-main-column"><div class="module toggle-wrap" id="details-module"><div class="mod-header" id="details-module_heading"><ul class="ops"></ul><h2 class="toggle-title">Details</h2></div><div class="mod-content">
<ul class="property-list two-cols" id="issuedetails">
<li class="item">
<div class="wrap">
<strong class="name">Type:</strong>
<span class="value" id="type-val">
<img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" title="Wish - General wishlist item." width="16"/> Wish
        </span>
</div>
</li> <li class="item item-right">
<div class="wrap">
<strong class="name">Status:</strong>
<span class="value" id="status-val">
<span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip='&lt;span class="jira-issue-status-tooltip-title"&gt;Resolved&lt;/span&gt;&lt;br&gt;&lt;span class="jira-issue-status-tooltip-desc"&gt;A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.&lt;/span&gt;'>Resolved</span> </span>
</div>
</li>
<li class="item new">
<div class="wrap">
<strong class="name">Priority:</strong>
<span class="value" id="priority-val">
<img alt="" height="16" src="/jira/images/icons/priorities/minor.svg" title="Minor - Minor loss of function, or other problem where easy workaround is present." width="16"/>  Minor                     </span>
</div>
</li>
<li class="item item-right">
<div class="wrap">
<strong class="name">Resolution:</strong>
<span class="value resolved" id="resolution-val">
                             Not A Bug
                    </span>
</div>
</li>
<li class="item">
<div class="wrap">
<strong class="name">Affects Version/s:</strong>
<span class="value" id="versions-val">
<span class="shorten" id="versions-field">
<span title="7.4 Minor release after 7.3">7.4</span>,                                            <span title="master (8.0) Current unstable dev">master (8.0)</span> </span>
</span>
</div>
</li>
<li class="item item-right">
<div class="wrap">
<strong class="name">Fix Version/s:</strong>
<span class="value" id="fixfor-val">
                                        None
                    </span>
</div>
</li>
<li class="item">
<div class="wrap">
<strong class="name">Component/s:</strong>
<span class="value" id="components-val">
<span class="shorten" id="components-field">
<a href="/jira/issues/?jql=project+%3D+LUCENE+AND+component+%3D+%22core%2Findex%22" title="core/index issues with indexing code">core/index</a> </span>
</span>
</div>
</li>
<li class="item full-width">
<div class="wrap" id="wrap-labels">
<strong class="name">Labels:</strong>
<div class="labels-wrap value">
<span class="labels" id="labels-13204536-value">None</span>
</div>
</div>
</li> </ul>
</div></div><div class="module toggle-wrap" id="descriptionmodule"><div class="mod-header" id="descriptionmodule_heading"><ul class="ops"></ul><h2 class="toggle-title">Description</h2></div><div class="mod-content"><div class="field-ignore-highlight" id="description-val">
<div class="user-content-block">
<p><tt>DefaultIndexingChain.invert(...)</tt> calls <tt>invertState.setAttributeSource(stream)</tt> before <tt>stream.incrementToken()</tt> is called.</p>
<p>For instances of <tt>stream</tt> that lazily instantiate token attributes (e.g., as <tt>solr.PreAnalyzedField$PreAnalyzedTokenizer</tt> does upon the first call to <tt>incrementToken()</tt> that returns <tt>true</tt>), this can result in caching a <tt>null</tt> value in <tt>invertState.termAttribute</tt> for a given <tt>stream</tt> instance.</p>
<p>Subsequent calls that reuse the same <tt>stream</tt> instance (reusing <tt>TokenStreamComponents</tt>) for field values with at least 1 token will call <tt>termHashPerField.start(...)</tt> which sets <tt>termsHashPerField.termAtt</tt> from the <tt>null</tt> value cached in the <tt>FieldInvertState.termAttribute</tt>. An NPE would be thrown when <tt>termsHashPerField.add()</tt> reasonably but incorrectly assumes a non-null value for <tt>termAtt</tt>.</p>
</div>
</div>
</div></div><div class="module toggle-wrap" id="dnd-metadata"><div class="mod-header" id="dnd-metadata_heading"><ul class="ops"></ul><h2 class="toggle-title">Attachments</h2></div><div class="mod-content"><div data-can-attach="false" data-project-type="software" data-thumbnails-allowed="false" data-upload-limit="62914560" id="dnd-metadata-webpanel"></div></div></div><div class="module toggle-wrap" id="attachmentmodule"><div class="mod-header" id="attachmentmodule_heading"><ul class="ops"><li class="drop"><div class="aui-dd-parent"><a class="icon drop-menu js-default-dropdown" href="#" title="Options"><span>Options</span></a><div class="aui-dropdown-content aui-list"><ul class="aui-list-section aui-first" id="attachment-sorting-options"><li class="aui-list-item"><a class="aui-list-checked aui-checked aui-list-item-link" href="/jira/browse/LUCENE-8610?attachmentSortBy=fileName#attachmentmodule" id="attachment-sort-key-name" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li><li class="aui-list-item"><a class="aui-list-checked aui-list-item-link" href="/jira/browse/LUCENE-8610?attachmentSortBy=dateTime#attachmentmodule" id="attachment-sort-key-date" title="Sort By Date"><span>Sort By Date</span></a></li></ul><ul class="aui-list-section aui-last" id="attachment-sorting-order-options"><li class="aui-list-item"><a class="aui-list-checked aui-checked aui-list-item-link" href="/jira/browse/LUCENE-8610?attachmentOrder=asc#attachmentmodule" id="attachment-sort-direction-asc" title="Ascending"><span>Ascending</span></a></li><li class="aui-list-item"><a class="aui-list-checked aui-list-item-link" href="/jira/browse/LUCENE-8610?attachmentOrder=desc#attachmentmodule" id="attachment-sort-direction-desc" title="Descending"><span>Descending</span></a></li></ul></div></div></li></ul><h2 class="toggle-title">Attachments</h2></div><div class="mod-content"><ol class="item-attachments" data-sort-key="fileName" data-sort-order="asc" id="file_attachments"><li class="attachment-content js-file-attachment" data-attachment-id="12951845" data-attachment-type="file" data-issue-id="13204536"><div class="attachment-thumb"><a data-downloadurl="text/x-patch:LUCENE-8610.patch:https://issues.apache.org/jira/secure/attachment/12951845/LUCENE-8610.patch" draggable="true" href="/jira/secure/attachment/12951845/LUCENE-8610.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a></div><dl><dt class="attachment-title"><a data-downloadurl="text/x-patch:LUCENE-8610.patch:https://issues.apache.org/jira/secure/attachment/12951845/LUCENE-8610.patch" draggable="true" href="/jira/secure/attachment/12951845/LUCENE-8610.patch" title="Latest  14/Dec/18 17:32 - Michael Gibney">LUCENE-8610.patch</a></dt><dd class="attachment-delete"><span class="icon"></span></dd><dd class="attachment-date"><time class="livestamp" datetime="2018-12-14T17:32:55.531Z">14/Dec/18 17:32</time></dd><dd class="attachment-size">19 kB</dd><dd class="attachment-author">Michael Gibney</dd></dl></li></ol></div></div><div class="module toggle-wrap" id="linkingmodule"><div class="mod-header" id="linkingmodule_heading"><ul class="ops"></ul><h2 class="toggle-title">Issue Links</h2></div><div class="mod-content">
<div class="links-container" data-default-link-icon="/jira/images/icons/generic_link_16.png">
<dl class="links-list ">
<dt title="is superceded by">is superceded by</dt>
<dd id="internal-13204940_12310051">
<div class="link-content">
<p>
<img alt="Improvement - An improvement or enhancement to an existing feature or task." height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" title="Improvement - An improvement or enhancement to an existing feature or task." width="16"/>
<span title="SOLR-13077: PreAnalyzedField TokenStreamComponents should be reusable">
<a class="issue-link link-title" data-issue-key="SOLR-13077" href="/jira/browse/SOLR-13077">SOLR-13077</a>
<span class="link-summary">PreAnalyzedField TokenStreamComponents should be reusable</span>
</span>
</p>
<ul class="link-snapshot">
<li class="priority"> <img alt="Minor - Minor loss of function, or other problem where easy workaround is present." height="16" src="/jira/images/icons/priorities/minor.svg" title="Minor - Minor loss of function, or other problem where easy workaround is present." width="16"/>
</li>
<li class="status">
<span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-blue-gray jira-issue-status-lozenge-new aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip='&lt;span class="jira-issue-status-tooltip-title"&gt;Open&lt;/span&gt;&lt;br&gt;&lt;span class="jira-issue-status-tooltip-desc"&gt;The issue is open and ready for the assignee to start work on it.&lt;/span&gt;'>Open</span>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div></div><div class="module toggle-wrap" id="activitymodule"><div class="mod-header" id="activitymodule_heading"><ul class="ops"></ul><h2 class="toggle-title">Activity</h2></div><div class="mod-content">
<big-pipe data-id="activity-panel-pipe-id" style="height: 70px">
<div></div>
</big-pipe>
</div></div></div><div class="aui-item issue-side-column" id="viewissuesidebar"><div class="module toggle-wrap" id="peoplemodule"><div class="mod-header" id="peoplemodule_heading"><ul class="ops"></ul><h2 class="toggle-title">People</h2></div><div class="mod-content">
<ul class="item-details" id="peopledetails">
<li class="people-details">
<dl>
<dt>Assignee:</dt>
<dd>
<span class="view-issue-field" id="assignee-val">
<span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10453"/></span></span>
    Unassigned
</span>
</dd>
</dl>
<dl>
<dt>Reporter:</dt>
<dd>
<span class="view-issue-field" id="reporter-val">
<span class="user-hover" data-user='{"avatarUrl":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452","displayName":"Michael Gibney","emailAddress":"michael@michaelgibney.net","username":"mgibney"}' id="issue_summary_reporter_mgibney" rel="mgibney">
<span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img alt="mgibney" src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452"/></span></span>
            Michael Gibney
        </span>
</span>
</dd>
</dl> </li>
</ul>
<ul class="item-details">
<li>
<dl>
<dt>Votes:</dt>
<dd>
<span class="aui-badge vote-state-off" id="vote-data">0</span>
<span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span>
</dd>
</dl>
<dl>
<dt>Watchers:</dt>
<dd>
<span class="aui-badge watch-state-off" id="watcher-data">2</span>
<span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span>
</dd>
</dl>
</li>
</ul>
</div></div><div class="module toggle-wrap" id="datesmodule"><div class="mod-header" id="datesmodule_heading"><ul class="ops"></ul><h2 class="toggle-title">Dates</h2></div><div class="mod-content">
<ul class="item-details">
<li>
<dl class="dates">
<dt>Created:</dt>
<dd class="date user-tz" title="14/Dec/18 17:18">
<span data-fieldtype="datetime" data-name="Created" id="created-val">
<time class="livestamp" datetime="2018-12-14T17:18:58+0000">14/Dec/18 17:18</time> </span>
</dd>
</dl>
<dl class="dates">
<dt>Updated:</dt>
<dd class="date user-tz" title="17/Dec/18 20:14">
<span data-fieldtype="datetime" data-name="Updated" id="updated-val">
<time class="livestamp" datetime="2018-12-17T20:14:20+0000">Monday 20:14</time> </span>
</dd>
</dl>
<dl class="dates">
<dt>Resolved:</dt>
<dd class="date user-tz" title="17/Dec/18 20:14">
<span data-fieldtype="datetime" data-name="Resolved" id="resolutiondate-val">
<time class="livestamp" datetime="2018-12-17T20:14:20+0000">Monday 20:14</time> </span>
</dd>
</dl>
</li>
</ul>
</div></div></div></div></div></div></div></div></div></div></div><!-- .aui-page-panel-inner --></div><!-- .aui-page-panel --><div class="issue-navigator-init"></div>
</section>
<footer id="footer" role="contentinfo">
<section class="footer-body">
<ul class="atlassian-footer">
<li>
        Atlassian JIRA <a class="seo-link" href="https://www.atlassian.com/software/jira" rel="nofollow">Project Management Software</a>
<span id="footer-build-information">(v7.6.3#76005-<span data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}" title="8a4e38d34af948780dbf52044e7aafb13a7cae58">sha1:8a4e38d</span>)</span>
</li>
<li>
<a href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa" id="about-link" rel="nofollow">About JIRA</a>
</li>
<li>
<a href="/jira/secure/CreateIssue!default.jspa" id="footer-report-problem-link" rel="nofollow">Report a problem</a>
</li>
</ul>
<ul class="atlassian-footer">
<li class="licensemessage">
                Powered by a free Atlassian <a href="http://www.atlassian.com/software/jira" rel="nofollow">JIRA</a> open source license for Apache Software Foundation. Try JIRA - <a href="http://www.atlassian.com/software/jira" rel="nofollow">bug tracking software</a> for <i>your</i> team.

        </li>
</ul>
<div id="footer-logo"><a href="http://www.atlassian.com/" rel="nofollow">Atlassian</a></div>
</section>
<fieldset class="hidden parameters">
<input title="loggedInUser" type="hidden" value=""/>
<input title="ajaxTimeout" type="hidden" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."/>
<input title="JiraVersion" type="hidden" value="7.6.3"/>
<input title="ajaxUnauthorised" type="hidden" value="You are not authorised to perform this operation. Please log in."/>
<input title="baseURL" type="hidden" value="https://issues.apache.org/jira"/>
<input title="ajaxCommsError" type="hidden" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "/>
<input title="ajaxServerError" type="hidden" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."/>
<input title="ajaxErrorCloseDialog" type="hidden" value="Close this dialog and press refresh in your browser"/>
<input title="ajaxErrorDialogHeading" type="hidden" value="Communications Breakdown"/>
<input title="dirtyMessage" type="hidden" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."/>
<input title="dirtyDialogMessage" type="hidden" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."/>
<input title="keyType" type="hidden" value="Type"/>
<input title="keyThen" type="hidden" value="then"/>
<input title="dblClickToExpand" type="hidden" value="Double click to expand"/>
<input title="actions" type="hidden" value="Actions"/>
<input title="removeItem" type="hidden" value="Remove"/>
<input title="workflow" type="hidden" value="Workflow"/>
<input title="labelNew" type="hidden" value="New Label"/>
<input title="issueActionsHint" type="hidden" value="Begin typing for available operations or press down to see all"/>
<input title="closelink" type="hidden" value="Close"/>
<input title="dotOperations" type="hidden" value="Operations"/>
<input title="dotLoading" type="hidden" value="Loading..."/>
<input title="frotherSuggestions" type="hidden" value="Suggestions"/>
<input title="frotherNomatches" type="hidden" value="No Matches"/>
<input title="multiselectVersionsError" type="hidden" value="{0} is not a valid version."/>
<input title="multiselectComponentsError" type="hidden" value="{0} is not a valid component."/>
<input title="multiselectGenericError" type="hidden" value="The value {0} is invalid."/>
</fieldset>
</footer>
</div>
<script data-initially-rendered="" data-wrm-batch-type="resource" data-wrm-key="jira.webresources:bigpipe-js" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" type="text/javascript"></script>
<script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-8610?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/LUCENE-8610?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-8610?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-8610?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/LUCENE-8610?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-8610?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/LUCENE-8610?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-8610?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/LUCENE-8610?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-8610?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/LUCENE-8610?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/LUCENE-8610?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-16721664\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-8610?focusedCommentId=16721664&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16721664\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mgibney\\\" id=\\\"commentauthor_16721664_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mgibney\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mgibney\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael Gibney\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16721664_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Dec\\/18 18:24\'\u003e\u003ctime class=\'livestamp\' datetime=\'2018-12-14T18:24:07+0000\'\u003e14\\/Dec\\/18 18:24\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Michael Gibney - 15\\/Dec\\/18 06:57\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\u003cspan class=\\\"nobr\\\"\u003e\u003ca href=\\\"\\/jira\\/secure\\/attachment\\/12951845\\/12951845_LUCENE-8610.patch\\\" title=\\\"LUCENE-8610.patch attached to LUCENE-8610\\\"\u003eLUCENE-8610.patch\u003csup\u003e\u003cimg class=\\\"rendericon\\\" src=\\\"\\/jira\\/images\\/icons\\/link_attachment_7.gif\\\" height=\\\"7\\\" width=\\\"7\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/sup\u003e\u003c\\/a\u003e\u003c\\/span\u003e\\u00A0adds a test to illustrate the issue, and a minor change to\\u00A0delay call to \u003ctt\u003einvertState.setAttributeSource(...)\u003c\\/tt\u003e until after \u003ctt\u003estream.incrementToken()\u003c\\/tt\u003e first returns \u003ctt\u003etrue\u003c\\/tt\u003e.\u003c\\/p\u003e\\n\\n\u003cp\u003eIt occurs to me that this might raise other issues about the way stream Attributes are cached in \u003ctt\u003einvertState\u003c\\/tt\u003e, but in any case this patch fixes the only real-world use case I\'m currently aware of (manifesting for \u003ctt\u003esolr.PreAnalyzedField$PreAnalyzedTokenizer\u003c\\/tt\u003e instances for empty fields (i.e., no tokens) \u003cspan class=\\\"error\\\"\u003e&#91;*EDIT: PreAnalyzedTokenizer instances are\\u00A0_not_ reused at index time, so this is a bad example*&#93;\u003c\\/span\u003e), and I it doesn\'t seem likely to be otherwise problematic.\u003c\\/p\u003e\\n\\n\u003cp\u003eBriefly, the other issues around caching that this raises:\u003cbr\\/\u003e\\n 1. Is there official guidance from the TokenStream API regarding whether it\'s acceptable to lazily instantiate token Attributes?\u003cbr\\/\u003e\\n 2. If ok to lazily instantiate, how about lazily instantiating \u003cem\u003eafter\u003c\\/em\u003e the initial call to \u003ctt\u003eincrementToken()\u003c\\/tt\u003e returns true? (I\'d guess not?)\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mgibney\\\" id=\\\"commentauthor_16721664_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mgibney\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mgibney\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael Gibney\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16721664_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Dec\\/18 18:24\'\u003e\u003ctime class=\'livestamp\' datetime=\'2018-12-14T18:24:07+0000\'\u003e14\\/Dec\\/18 18:24\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Michael Gibney - 15\\/Dec\\/18 06:57\\\"\u003eedited\u003c\\/span\u003e                     LUCENE-8610.patch     \\u00A0adds a test to illustrate the issue, and a minor change to\\u00A0delay call to  invertState.setAttributeSource(...)  until after  stream.incrementToken()  first returns  true . \\n\\n It occurs to me that this might raise other issues about the way stream Attributes are cached in  invertState , but in any case this patch fixes the only real-world use case I\'m currently aware of (manifesting for  solr.PreAnalyzedField$PreAnalyzedTokenizer  instances for empty fields (i.e., no tokens)  &#91;*EDIT: PreAnalyzedTokenizer instances are\\u00A0_not_ reused at index time, so this is a bad example*&#93; ), and I it doesn\'t seem likely to be otherwise problematic. \\n\\n Briefly, the other issues around caching that this raises: \\n 1. Is there official guidance from the TokenStream API regarding whether it\'s acceptable to lazily instantiate token Attributes? \\n 2. If ok to lazily instantiate, how about lazily instantiating  after  the initial call to  incrementToken()  returns true? (I\'d guess not?)              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16722043\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-8610?focusedCommentId=16722043&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16722043\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mgibney\\\" id=\\\"commentauthor_16722043_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mgibney\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mgibney\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael Gibney\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16722043_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Dec\\/18 06:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2018-12-15T06:50:31+0000\'\u003e15\\/Dec\\/18 06:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eChanged to \\\"minor wish\\\"; this patch still might be a good idea, but I encountered it in practice because I was using \u003ctt\u003esolr.PreAnalyzedField$PreAnalyzedTokenizer\u003c\\/tt\u003e incorrectly. \u003ctt\u003ePreAnalyzedTokenizer\u003c\\/tt\u003e (and its token Attributes) is not designed to be reused \u003cem\u003eat all\u003c\\/em\u003e at index time. Caching concerns only apply to TokenStream reuse, so now that I\'ve corrected my use of \u003ctt\u003ePreAnalyzedTokenizer\u003c\\/tt\u003e, this patch could be viewed as a solution in search of a problem.\u003c\\/p\u003e\\n\\n\u003cp\u003eIf this patch still has any merit, it would be because:\u003cbr\\/\u003e\\n 1. there might be TokenStreams that lazily instantiate token Attributes and \u003cem\u003eare\u003c\\/em\u003e reused, or\u003cbr\\/\u003e\\n 2. this change would be a prerequisite for potentially modifying \u003ctt\u003ePreAnalyzedTokenizer\u003c\\/tt\u003e to enable reuse, thus avoiding creation of a \u003ctt\u003ePreAnalyzedTokenizer\u003c\\/tt\u003e (and all associated token Attributes) for every field value.\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'m fine with just closing this issue; but again it\'s a pretty minor change that won\'t hurt anything, and could in some cases make indexing more robust. Or at least clarify whether it\'s acceptable for index-time TokenStreams to lazily instantiate token Attributes ...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mgibney\\\" id=\\\"commentauthor_16722043_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mgibney\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mgibney\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael Gibney\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16722043_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Dec\\/18 06:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2018-12-15T06:50:31+0000\'\u003e15\\/Dec\\/18 06:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Changed to \\\"minor wish\\\"; this patch still might be a good idea, but I encountered it in practice because I was using  solr.PreAnalyzedField$PreAnalyzedTokenizer  incorrectly.  PreAnalyzedTokenizer  (and its token Attributes) is not designed to be reused  at all  at index time. Caching concerns only apply to TokenStream reuse, so now that I\'ve corrected my use of  PreAnalyzedTokenizer , this patch could be viewed as a solution in search of a problem. \\n\\n If this patch still has any merit, it would be because: \\n 1. there might be TokenStreams that lazily instantiate token Attributes and  are  reused, or \\n 2. this change would be a prerequisite for potentially modifying  PreAnalyzedTokenizer  to enable reuse, thus avoiding creation of a  PreAnalyzedTokenizer  (and all associated token Attributes) for every field value. \\n\\n I\'m fine with just closing this issue; but again it\'s a pretty minor change that won\'t hurt anything, and could in some cases make indexing more robust. Or at least clarify whether it\'s acceptable for index-time TokenStreams to lazily instantiate token Attributes ...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16722116\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-8610?focusedCommentId=16722116&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16722116\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_16722116_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16722116_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Dec\\/18 11:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2018-12-15T11:18:02+0000\'\u003e15\\/Dec\\/18 11:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for raising an issue \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mgibney\\\" class=\\\"user-hover\\\" rel=\\\"mgibney\\\"\u003eMichael Gibney\u003c\\/a\u003e! I think the problem is in PreAnalyzedTokenizer here, which seems to be doing things at odd times - it\'s doing IO in setReader() when it really ought to be doing it in reset(), and adding an OffsetAttribute in incrementToken seems completely wrong to me.  And re-use is completely broken, as you say.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think the best way forward is to close this issue, and open a Solr one to fix PreAnalyzedTokenizer.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_16722116_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16722116_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Dec\\/18 11:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2018-12-15T11:18:02+0000\'\u003e15\\/Dec\\/18 11:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for raising an issue  Michael Gibney ! I think the problem is in PreAnalyzedTokenizer here, which seems to be doing things at odd times - it\'s doing IO in setReader() when it really ought to be doing it in reset(), and adding an OffsetAttribute in incrementToken seems completely wrong to me.  And re-use is completely broken, as you say. \\n\\n I think the best way forward is to close this issue, and open a Solr one to fix PreAnalyzedTokenizer.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16723164\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-8610?focusedCommentId=16723164&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16723164\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mgibney\\\" id=\\\"commentauthor_16723164_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mgibney\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mgibney\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael Gibney\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16723164_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Dec\\/18 17:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2018-12-17T17:02:59+0000\'\u003e17\\/Dec\\/18 17:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks, \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\" class=\\\"user-hover\\\" rel=\\\"romseygeek\\\"\u003eAlan Woodward\u003c\\/a\u003e! Created \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-13077\\\" title=\\\"PreAnalyzedField TokenStreamComponents should be reusable\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-13077\\\"\u003eSOLR-13077\u003c\\/a\u003e.\u003c\\/p\u003e\\n\\n\u003cp\u003eI do see that the\\u00A0\u003ca href=\\\"https:\\/\\/lucene.apache.org\\/core\\/7_6_0\\/core\\/org\\/apache\\/lucene\\/analysis\\/TokenStream.html\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003eTokenStream API\u003c\\/a\u003e says:\u003c\\/p\u003e\\n\u003cblockquote\u003e\u003cp\u003eTo make sure that filters and consumers know which attributes are available, the attributes must be added during instantiation.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eIs this a requirement, or a recommendation? It reads a bit like a requirement; but you could also read it as being a recommendation and a warning (\\\"if you \u003cb\u003edo\u003c\\/b\u003e add attributes after instantiation, filters and consumers might not know which attributes are available, so proceed at your own risk\\\")\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mgibney\\\" id=\\\"commentauthor_16723164_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mgibney\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mgibney\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael Gibney\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16723164_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Dec\\/18 17:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2018-12-17T17:02:59+0000\'\u003e17\\/Dec\\/18 17:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks,  Alan Woodward ! Created  SOLR-13077 . \\n\\n I do see that the\\u00A0 TokenStream API  says: \\n  To make sure that filters and consumers know which attributes are available, the attributes must be added during instantiation.  \\n\\n Is this a requirement, or a recommendation? It reads a bit like a requirement; but you could also read it as being a recommendation and a warning (\\\"if you  do  add attributes after instantiation, filters and consumers might not know which attributes are available, so proceed at your own risk\\\")              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16723172\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-8610?focusedCommentId=16723172&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16723172\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_16723172_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16723172_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Dec\\/18 17:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2018-12-17T17:10:17+0000\'\u003e17\\/Dec\\/18 17:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\'Must\' implies a requirement, but I don\'t think we actually enforce that anywhere - that may be something to look into as well.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"romseygeek\\\" id=\\\"commentauthor_16723172_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"romseygeek\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Alan Woodward\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16723172_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Dec\\/18 17:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2018-12-17T17:10:17+0000\'\u003e17\\/Dec\\/18 17:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    \'Must\' implies a requirement, but I don\'t think we actually enforce that anywhere - that may be something to look into as well.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16723263\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-8610?focusedCommentId=16723263&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16723263\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mgibney\\\" id=\\\"commentauthor_16723263_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mgibney\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mgibney\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael Gibney\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16723263_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Dec\\/18 18:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2018-12-17T18:35:32+0000\'\u003e17\\/Dec\\/18 18:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\\\"\'Must\' implies a requirement\\\" \\u2013 yes, that\'s definitely how I initially read it. I guess any potential confusion would depend on how one reads the preceding \\\"To make sure that filters and consumers know which attributes are available\\\":\u003cbr\\/\u003e\\n 1. if read as an \u003cem\u003eexplanation\u003c\\/em\u003e, then \\\"must\\\" implies a requirement\u003cbr\\/\u003e\\n 2. if read as a \u003cem\u003econdition\u003c\\/em\u003e, then \\\"must\\\" is a qualified requirement (or suggestion\\/warning)\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks for the clarification, and I\'ll see if I can take a stab at bringing \u003ctt\u003ePreAnalyzedTokenizer\u003c\\/tt\u003e\\u00A0into line with the requirement.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mgibney\\\" id=\\\"commentauthor_16723263_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mgibney\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mgibney\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael Gibney\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16723263_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Dec\\/18 18:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2018-12-17T18:35:32+0000\'\u003e17\\/Dec\\/18 18:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    \\\"\'Must\' implies a requirement\\\" \\u2013 yes, that\'s definitely how I initially read it. I guess any potential confusion would depend on how one reads the preceding \\\"To make sure that filters and consumers know which attributes are available\\\": \\n 1. if read as an  explanation , then \\\"must\\\" implies a requirement \\n 2. if read as a  condition , then \\\"must\\\" is a qualified requirement (or suggestion\\/warning) \\n\\n Thanks for the clarification, and I\'ll see if I can take a stab at bringing  PreAnalyzedTokenizer \\u00A0into line with the requirement.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16723335\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-8610?focusedCommentId=16723335&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16723335\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mgibney\\\" id=\\\"commentauthor_16723335_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mgibney\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mgibney\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael Gibney\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16723335_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Dec\\/18 20:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2018-12-17T20:14:20+0000\'\u003e17\\/Dec\\/18 20:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWill look at addressing this in \u003ctt\u003esolr.PreAnalyzedAnalyzer\u003c\\/tt\u003e. There may be other \u003ctt\u003eTokenStreams\u003c\\/tt\u003e that don\'t strictly follow the requirement to initialize all token Attributes on instantiation, but as of now nothing relating to this issue is known to be broken.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mgibney\\\" id=\\\"commentauthor_16723335_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mgibney\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mgibney\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael Gibney\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16723335_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Dec\\/18 20:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2018-12-17T20:14:20+0000\'\u003e17\\/Dec\\/18 20:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Will look at addressing this in  solr.PreAnalyzedAnalyzer . There may be other  TokenStreams  that don\'t strictly follow the requirement to initialize all token Attributes on instantiation, but as of now nothing relating to this issue is known to be broken.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script>
<script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="12310110";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/LUCENE\\/summary\\\" title=\\\"Lucene - Core\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=12310110&amp;avatarId=10061\\\" alt=\\\"Lucene - Core\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/LUCENE\\/summary\\\" title=\\\"Lucene - Core\\\"\u003eLucene - Core\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/LUCENE\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/LUCENE?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/LUCENE?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script>
<script data-initially-rendered="" data-wrm-batch-type="resource" data-wrm-key="jira.webresources:bigpipe-init" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" type="text/javascript"></script>
<form class="dont-default-focus" id="jira_request_timing_info">
<fieldset class="parameters hidden">
<input title="jira.request.start.millis" type="hidden" value="1545364562333"/>
<input title="jira.request.server.time" type="hidden" value="147"/>
<input title="jira.request.id" type="hidden" value="236x57240792x8"/>
<input title="jira.session.expiry.time" type="hidden" value="-"/>
<input title="jira.session.expiry.in.mins" type="hidden" value="-"/>
<input id="jiraConcurrentRequests" name="jira.request.concurrent.requests" type="hidden" value="5"/>
<input title="db.reads.time.in.ms" type="hidden" value="37"/>
<input title="db.conns.time.in.ms" type="hidden" value="45"/>
</fieldset>
</form>
<!--
	                 REQUEST ID : 236x57240792x8
	          REQUEST TIMESTAMP : [21/Dec/2018:03:56:02 +0000]
	               REQUEST TIME : 0.1470
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 5

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=19, elapsedTotal=37676453, elapsedMin=301625, elapsedMax=24652968, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=23, elapsedTotal=45551207, elapsedMin=305475, elapsedMax=24679780, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->
</body>
</html>
